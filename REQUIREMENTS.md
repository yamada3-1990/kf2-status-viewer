# Killing Floor 戦績可視化アプリ 要件定義書 (v1.0)

### 1. 概要

本アプリケーションは、PCゲームプラットフォーム「Steam」で提供されているゲーム『Killing Floor 2』および、将来的にリリース予定の『Killing Floor 3』のプレイヤー個人の戦績データを取得し、グラフなどで分かりやすく可視化することを目的とする。
PythonライブラリのStreamlitを使用し、ユーザーのローカル環境で動作するデスクトップアプリケーションとして開発する。

---

### 2. プロジェクトの目的とゴール

* **目的:** プレイヤーが自身のプレイ記録を客観的なデータで振り返り、上達や楽しみの一助とすること。
* **ゴール:** SteamアカウントIDとAPIキーを入力するだけで、Killing Floorシリーズの戦績がダッシュボード形式で表示されるアプリケーションを完成させること。

---

### 3. 機能要件

#### 3.1. データ取得・入力機能

* **【入力】Steam APIキー:** ユーザーは自身のSteam APIキーをアプリケーションに入力する。
    * APIキーの取得方法に関する簡単なガイドをアプリ内に表示する。
* **【入力】Steam ID:** ユーザーは自身のSteam ID（64-bit ID）を入力する。
    * Steam IDの確認方法に関する簡単なガイドをアプリ内に表示する。
* **【処理】Steam API連携:** 入力されたAPIキーとSteam IDを使用して、Steamworks API (`ISteamUserStats/GetUserStatsForGame`) にリクエストを送信し、指定されたゲームの統計情報(Stats)と実績情報(Achievements)を取得する。

#### 3.2. データ可視化機能

取得した戦績データを、Streamlitのコンポーネントを用いてグラフや表で表示する。

* **対象ゲーム:**
    * Killing Floor 2 (AppID: `232090`)
    * Killing Floor 3 (リリース後、API対応が確認され次第実装)
* **表示データの優先順位と内容:**
    1.  **総合成績サマリー (最優先):**
        * 総キル数
        * 総ヘッドショット数
        * ヘッドショット率 ( `ヘッドショット数 ÷ 総キル数` で算出)
        * 総プレイ時間 (Steamから取得)
    2.  **ZED討伐数:**
        * 各ZED（敵キャラクター）の討伐数を棒グラフなどで一覧表示する。
    3.  **Perk情報:**
        * APIから取得した各Perkの総経験値をもとに、現在のPerkレベルを計算して表示する。
        * 次のレベルアップまでに必要な経験値を表示する。
    4.  **実績:**
        * 実績の達成状況（達成/未達成）を一覧表示する。
        * 総実績数と達成済みの数を表示し、達成率（%）をプログレスバーなどで可視化する。
    5.  **その他データ:**
        * 総獲得DOSH、総溶接ポイントなど、取得可能な面白いデータを表示する。

---

### 4. 非機能要件

#### 4.1. 動作環境

* **フレームワーク:** Streamlit
* **プログラミング言語:** Python
* **実行環境:** ユーザーのローカルPC環境 (Windows/macOS/Linux)
    * Pythonと必要なライブラリがインストールされている必要がある。
    * 将来的に、PyInstallerなどを利用した単一実行ファイル形式（.exeなど）での配布も検討する。

#### 4.2. セキュリティ

* **ローカル完結:** ユーザーが入力したSteam APIキーやID、および取得した戦績データは、外部のサーバーに一切送信・保存しない。すべての処理はユーザーのPC内で完結する。
* **APIキーの管理:** APIキーはアプリケーション内に保存せず、実行の都度ユーザーが入力する方式を基本とする。

#### 4.3. 拡張性

* 『Killing Floor 3』がリリースされ、Steam APIで戦績が取得可能になった際に、スムーズに追加対応ができるようなコード構造にする。
* 表示するグラフの種類やデータ項目を、将来的に容易に追加・変更できるように設計する。

---

### 5. リスクと課題

* **【低リスク】Steam APIの制約:**
    * 技術調査により、主要なデータは取得可能であることが確認されたため、プロジェクト頓挫のリスクは低い。ただし、一部取得できない、または意図しないデータが存在する可能性は残る。
* **APIの仕様変更:** 将来的なSteam APIの仕様変更や、ゲームのアップデートによる統計データ名の変更により、アプリケーションが正常に動作しなくなるリスクがある。これは継続的なメンテナンスで対応する。
* **ユーザーの環境依存:** ユーザーのPC環境（プロキシ、ファイアウォールなど）によっては、Steam APIへのアクセスが失敗する可能性がある。エラー発生時に適切なメッセージを表示するよう考慮する。
* **プライバシー設定:** ユーザーがSteamプロフィールの「ゲームの詳細」を非公開に設定している場合、APIでデータを取得できない。この場合も、その旨をユーザーに通知する機能を実装する。